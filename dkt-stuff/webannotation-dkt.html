<!DOCTYPE html>
<html>
    <head>
	<meta charset="utf-8">

	<title>DKT Webannotation Demo</title>
	<script
	src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
	<script type="text/javascript">
            var sendDKT = function () {
                var content = $('#content').val();
                var requestURL = "http://dev.digitale-kuratierung.de:8021/e-nlp/namedEntityRecognition?analysis=temp&informat=text&models=englishDates&language=en";

                $.ajax({
                    type: 'POST',
                    url: requestURL,
                    data: content,
                    headers: {
                        //'Accept': 'application/json+ld',
                        //'Content-Type': 'text/html'
                    }
                })
                        .done(function (result) {
                            console.log("success");
                            var nifInput = result;
                            var webAnnConvertRequestUrl = "http://api.freme-project.eu/0.6/toolbox/convert/documents/dkt-temp-output-as-web-annotation";
                            $.ajax({
                                type: 'POST',
                                url: webAnnConvertRequestUrl,
                                data: nifInput,
                                headers:
                                        {
                                           'Accept': 'application/json+ld',
                                           'Content-Type': 'text/turtle'
                                        }
                            }).done(function (result2) {
                                console.log("success");
                                var tempstring = JSON.stringify(result2, null, 4); 
                                $("#output2").empty().append(tempstring);
                            })
                                    //var tempstring = result.replace(/</g, "&lt;");
                                    //$("#output2").empty().append(tempstring);
                                    .fail(function (xhr, statusText, err) {
                                        console.log("error");
                                        error(xhr + statusText + err);
                                        console.log(xhr + statusText + err);
                                        //$("#output2").empty().append(xhr + statusText + err);
                                    });
                        })
                        .fail(function (xhr, statusText, err) {
                            console.log("error");
                            error(xhr + statusText + err);
                            console.log(xhr + statusText + err);
                            //$("#output2").empty().append(xhr + statusText + err);
                        });
                ;
            };
	</script>
	<style>
	    *.input { width: 100%; }
	    *.output { width: 100%; }
	</style>    
    </head>
    <body>
	<h1>DKT Webannotation Demo</h1>
	<form name="input">
	    <p>Enter text with time related expressions:</p>
	    <textarea rows="4" cols="50" name="content"  id="content"  class="input">We will start in 2014 and will be finished in 2016.</textarea>
	</form>
	<button onclick="sendDKT();">Call DKT Service</button>
	<button onclick="$('#output2').empty().append('');">Refresh output</button>
	<p>Output appears here:</p>
	<div id="out">Output</div>
	<form name="output">
	    <textarea rows="15" cols="50" name="output2"  id="output2" class="output"></textarea>
	</form>
    </body>
</html>
